<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Лист Персонажа</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Unicase:wght@700&display=swap" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" referrerpolicy="no-referrer" rel="stylesheet" />
  <link href="style.css" rel="stylesheet" />
</head>
<body>
  <!-- Блок очікування -->
  <div id="waitingBlock" class="waiting-block">
    <i class="fas fa-hourglass-half waiting-icon"></i>
    <h2>Зачекайте, поки ГМ не видасть вам персонажа</h2>
  </div>

  <!-- Основний контент -->
  <div id="mainContent" class="main-container" style="display: none;">
    <!-- Ліва панель -->
    <div class="left-panel">
      <!-- Керування персонажами -->
      <div class="character-controls">
        <div class="character-select-group">
          <i class="fa-solid fa-user-shield character-icon"></i>
          <select id="characterSelect"></select>
          <button id="addCharacterButton" title="Додати персонажа">
            <i class="fas fa-plus"></i>
          </button>
          <button id="deleteCharacterButton" title="Видалити персонажа">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
        <div class="player-name-block">
          <div class="name-input-group">
            <i class="fas fa-user" title="Ім'я гравця"></i>
            <select id="playerNameSelect"></select>
          </div>
        </div>
      </div>

      <div class="quick-actions-row">
        <div class="saves-and-advantages-block">
          <div class="death-saves">
            <div class="death-saves-group">
              <div class="death-saves-label">Успіхи</div>
              <div class="checkbox-group">
                <input id="deathSavesSuccess1" type="checkbox" />
                <input id="deathSavesSuccess2" type="checkbox" />
                <input id="deathSavesSuccess3" type="checkbox" />
              </div>
            </div>
            <div class="death-saves-group">
              <div class="death-saves-label">Провали</div>
              <div class="checkbox-group">
                <input id="deathSavesFailure1" type="checkbox" />
                <input id="deathSavesFailure2" type="checkbox" />
                <input id="deathSavesFailure3" type="checkbox" />
              </div>
            </div>
          </div>
          <div class="inspiration-advantage-block">
            <label class="advantage-label">Перевага <input id="advantageCheckbox" type="checkbox" /></label>
            <label class="disadvantage-label">Похибка <input id="disadvantageCheckbox" type="checkbox" /></label>
          </div>
          <div class="inspiration-block">
            <label class="inspiration-label"><span class="inspiration-crown" aria-label="Натхнення"><i class="fas fa-dice-d20"></i></span> <input id="inspirationCheckbox" type="checkbox" /></label>
          </div>
          <div class="help-block">
            <i class="fas fa-info-circle" title="Довідка"></i>
          </div>
        </div>
      </div>

      <div id="abilityScoresBlock">
        <div class="ability-scores">
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="strengthScore">Сила</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="strengthScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="strengthModifier">+0</div>
            </div>
          </div>
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="dexterityScore">Спритність</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="dexterityScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="dexterityModifier">+0</div>
            </div>
          </div>
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="constitutionScore">Статура</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="constitutionScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="constitutionModifier">+0</div>
            </div>
          </div>
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="intelligenceScore">Інтелект</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="intelligenceScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="intelligenceModifier">+0</div>
            </div>
          </div>
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="wisdomScore">Мудрість</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="wisdomScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="wisdomModifier">+0</div>
            </div>
          </div>
          <div class="ability-score-item">
            <div class="ability-score-left">
              <div class="ability-score-label-row">
                <label for="charismaScore">Харизма</label>
              </div>
              <div class="ability-score-input-row">
                <div class="stat-input-wrapper">
                  <button class="stat-btn minus">−</button>
                  <input id="charismaScore" type="number" placeholder="10" />
                  <button class="stat-btn plus">+</button>
                </div>
              </div>
            </div>
            <div class="ability-score-mod-col">
              <div class="modifier-box" id="charismaModifier">+0</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Лист персонажа -->
      <div class="character-sheet" id="characterSheetContainer">
        <div class="sheet-columns">
          <div class="sheet-col-left">
            <div class="weapon-block">
              <div class="weapon-label-row">
                <div class="weapon-label-controls">
                  <span class="weapon-label">Атаки</span>
                  <div class="weapon-edit-group" style="display: flex; background: transparent; padding: 0; margin: 0;">
                    <button class="weapon-add-row-btn" id="weaponAddRowBtn" title="Додати рядок" style="display:none;"><i class="fas fa-plus"></i></button>
                    <button class="weapon-accept-btn" id="weaponAcceptBtn" title="Підтвердити" style="display:none;"><i class="fas fa-check-circle"></i></button>
                    <button class="weapon-cancel-btn" id="weaponCancelBtn" title="Відхилити" style="display:none;"><i class="fas fa-times-circle"></i></button>
                  </div>
                  <button class="weapon-edit-btn" id="weaponEditBtn" title="Редагувати"><i class="fas fa-pen"></i></button>
                </div>
              </div>
              <table class="weapon-table">
                <thead>
                  <tr>
                    <th>Назва</th>
                    <th class="weapon-table-center"><i class="fas fa-dice" title="Бонус"></i></th>
                    <th class="weapon-table-center"><i class="fas fa-dice-d20" title="Шкода"></i></th>
                    <th style="width:32px;"></th>
                  </tr>
                </thead>
                <tbody id="weaponTableBody">
                  <!-- Динамічні рядки -->
                </tbody>
              </table>
            </div>
            <!-- Новий блок інвентаря -->
            <div class="inventory-block">
              <div class="weapon-label-row">
                <div class="weapon-label-controls">
                  <span class="weapon-label">Інвентар</span>
                  <div class="weapon-edit-group" style="display: flex; background: transparent; padding: 0; margin: 0;">
                    <button class="weapon-add-row-btn" id="inventoryAddRowBtn" title="Додати рядок" style="display:none;"><i class="fas fa-plus"></i></button>
                    <button class="weapon-accept-btn" id="inventoryAcceptBtn" title="Підтвердити" style="display:none;"><i class="fas fa-check-circle"></i></button>
                    <button class="weapon-cancel-btn" id="inventoryCancelBtn" title="Відхилити" style="display:none;"><i class="fas fa-times-circle"></i></button>
                  </div>
                  <button class="weapon-edit-btn" id="inventoryEditBtn" title="Редагувати"><i class="fas fa-pen"></i></button>
                </div>
              </div>
              <table class="weapon-table">
                <thead>
                  <tr>
                    <th>Назва</th>
                    <th class="weapon-table-center"><i class="fas fa-box" title="Кількість"></i></th>
                    <th class="weapon-table-center"><i class="fas fa-weight-hanging" title="Вага"></i></th>
                    <th style="width:32px;"></th>
                  </tr>
                </thead>
                <tbody id="inventoryTableBody">
                  <!-- Динамічні рядки -->
                </tbody>
              </table>
            </div>
          </div>
          <div class="sheet-col-right">
            <div class="skill-block">
              <div class="skill-label-row">
                <div class="skill-label-controls">
                  <span class="skill-label">Навички</span>
                  <div class="skill-edit-group" style="display: flex; background: transparent; padding: 0; margin: 0;">
                    <button class="skill-add-row-btn" id="skillAddRowBtn" title="Додати рядок" style="display:none;"><i class="fas fa-plus"></i></button>
                    <button class="skill-accept-btn" id="skillAcceptBtn" title="Підтвердити" style="display:none;"><i class="fas fa-check-circle"></i></button>
                    <button class="skill-cancel-btn" id="skillCancelBtn" title="Відхилити" style="display:none;"><i class="fas fa-times-circle"></i></button>
                  </div>
                  <button class="skill-edit-btn" id="skillEditBtn" title="Редагувати"><i class="fas fa-pen"></i></button>
                </div>
              </div>
              <table class="skill-table">
                <tbody id="skillTableBody">
                  <!-- Динамічні рядки: кожен складається з поля назви (label+input) над полем опису (textarea), справа кнопка видалення -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Права панель -->
    <div class="right-panel">
      <div class="photo-block" id="photoBlock">
        <input id="characterName" placeholder="Ім'я персонажа" type="text" />
        
        <div class="photo-container">
          <img alt="Натисніть для завантаження фотографії" 
               id="characterPhotoImg" 
               src="/no-image-placeholder.svg"
               title="Натисніть для завантаження фотографії" />
          <div id="photoControls">
            <button id="replacePhotoButton" title="Завантажити фотографію">
              <i class="fas fa-upload"></i>
            </button>
            <button id="deletePhotoButton" title="Видалити фотографію">
              <i class="fas fa-trash-alt"></i>
            </button>
          </div>
        </div>

        <div class="quick-stats-block">
          <div class="quick-stat-item">
            <i class="fas fa-heart" title="ХП"></i>
            <div class="stat-input-wrapper">
              <button class="stat-btn minus">−</button>
              <input id="healthPoints" placeholder="8" type="number" />
              <button class="stat-btn plus">+</button>
            </div>
          </div>
          <div class="quick-stat-item">
            <i class="fas fa-shield-alt" title="Клас Броні"></i>
            <div class="stat-input-wrapper">
              <button class="stat-btn minus">−</button>
              <input id="armorClass" placeholder="16" type="number" />
              <button class="stat-btn plus">+</button>
            </div>
          </div>
          <div class="quick-stat-item">
            <i class="fas fa-running" title="Швидкість"></i>
            <div class="stat-input-wrapper">
              <button class="stat-btn minus">−</button>
              <input id="speed" placeholder="30" type="number" />
              <button class="stat-btn plus">+</button>
            </div>
          </div>
          <div class="quick-stat-item">
            <i class="fas fa-spa" title="Ініціатива"></i>
            <div class="stat-input-wrapper">
              <button class="stat-btn minus">−</button>
              <input id="initiative" placeholder="0" type="number" />
              <button class="stat-btn plus">+</button>
            </div>
          </div>
        </div>

        <input accept="image/*" id="photoFileInput" style="display: none;" type="file" />
      </div>
    </div>
  </div>

  <div id="noCharacterMessage" style="display: none; text-align: center; margin-top: 20px;">
    У вас ще немає персонажів.
  </div>

  <!-- Модальне вікно з інформацією -->
  <div id="characterInfoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Інформація про персонажа</h2>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="info-grid">
          <div class="info-item">
            <label>Ім'я:</label>
            <span id="modalCharacterName"></span>
          </div>
          <div class="info-item">
            <label>Раса:</label>
            <span id="modalCharacterRace"></span>
          </div>
          <div class="info-item">
            <label>Клас та рівень:</label>
            <span id="modalCharacterClass"></span>
          </div>
          <div class="info-item">
            <label>Передісторія:</label>
            <span id="modalBackground"></span>
          </div>
          <div class="info-item">
            <label>Світогляд:</label>
            <span id="modalAlignment"></span>
          </div>
          <div class="info-item">
            <label>Характеристики:</label>
            <div class="modal-stats">
              <div>СИЛ: <span id="modalStrength"></span></div>
              <div>СПР: <span id="modalDexterity"></span></div>
              <div>СТА: <span id="modalConstitution"></span></div>
              <div>ІНТ: <span id="modalIntelligence"></span></div>
              <div>МУД: <span id="modalWisdom"></span></div>
              <div>ХАР: <span id="modalCharisma"></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/@owlbear-rodeo/sdk@latest/dist/owlbear-sdk.js"></script>
  <script src="main.js" type="module"></script>
</body>
</html>